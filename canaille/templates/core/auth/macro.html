{# Authentication macros for consistent user information display #}

{% macro user_display_name() -%}
    {%- if g.auth.known_user and g.auth.user -%}
        {{ g.auth.user.name }}
    {%- else -%}
        {{ g.auth.user_name }}
    {%- endif -%}
{%- endmacro %}

{% macro user_header(subtitle) -%}
    {%- if g.auth.known_user and g.auth.user -%}
        {%- if g.auth.user.photo -%}
            <img class="ui small circular image" src="{{ url_for('core.account.photo', user=g.auth.user, field='photo') }}" alt="{{ g.auth.user.name }}">
        {%- endif -%}
        <div class="content">
            {{ _("Sign in as %(username)s", username=g.auth.user.name) }}
        </div>
        <div class="sub header">{{ g.auth.user.user_name }}</div>
    {%- else -%}
        <div class="content">
            {{ _("Sign in as %(username)s", username=g.auth.user_name) }}
        </div>
    {%- endif -%}
    {%- if subtitle -%}
        <div class="sub header">{{ subtitle }}</div>
    {%- endif -%}
{%- endmacro %}

{% macro not_user_button() -%}
    {{ _("I am not %(username)s", username=user_display_name()) }}
{%- endmacro %}
